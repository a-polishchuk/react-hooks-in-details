"use strict";(self.webpackChunkhooks=self.webpackChunkhooks||[]).push([[386],{35386:function(e,r,n){n.r(r),n.d(r,{default:function(){return R}});var a=n(91933),t=n(50678),s=n(72791),i=n(80184),l=(0,s.createContext)();function d(){return(0,s.useContext)(l)}function c(e){var r=e.children,n=(0,s.useState)(3),a=(0,t.Z)(n,2),d={userId:a[0],setUserId:a[1]};return(0,i.jsx)(l.Provider,{value:d,children:r})}var u=n(27166),o=n(33032),h=n(74569),v=n.n(h)().create({baseURL:"https://jsonplaceholder.typicode.com/"});function x(e){return j.apply(this,arguments)}function j(){return(j=(0,o.Z)((0,u.Z)().mark((function e(r){var n,a,t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.queryKey,e.next=3,v.get(n[0]);case 3:return a=e.sent,t=a.data,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){var r=(0,a.useQuery)(e,x),n=r.isLoading,t=r.data,i=r.error,l=(0,a.useQueryClient)();return{loading:n,data:t,error:i,invalidate:(0,s.useCallback)((function(){l.invalidateQueries(e)}),[l,e])}}function f(){var e=d().userId;return m("users/".concat(e))}function p(){var e=function(){var e,r=f().data;return(null!==(e=null===r||void 0===r?void 0:r.name)&&void 0!==e?e:"").split(" ").map((function(e){return e.charAt(0)})).join("")}();return(0,i.jsx)("div",{className:"rq-avatar",children:e})}function N(){var e=f().data;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"rq-user-name",children:null===e||void 0===e?void 0:e.name}),(0,i.jsx)("div",{className:"rq-user-name-email",children:null===e||void 0===e?void 0:e.email})]})}function g(){var e=d().userId;return m("todos?userId=".concat(e))}function b(){var e,r=g().data,n=null!==(e=null===r||void 0===r?void 0:r.length)&&void 0!==e?e:0;return(0,i.jsxs)("div",{className:"rq-todo-counter",children:["Todos:",(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:n})]})}function y(){return new Promise((function(e){e(new Date)}))}var q={refetchInterval:3e3};function w(){var e,r=function(){var e=(0,a.useQuery)("lastUpdated",y,q);return{loading:e.isLoading,data:e.data,error:e.error}}().data,n=null!==(e=null===r||void 0===r?void 0:r.toLocaleTimeString())&&void 0!==e?e:"--";return(0,i.jsxs)("div",{className:"rq-last-updated",children:["Last updated:",(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:n})]})}var C=n(49745);function k(){var e=(0,a.useQueryClient)();return(0,i.jsx)(C.z,{text:"Refresh all",onClick:function(){e.invalidateQueries()}})}function Q(){return(0,i.jsxs)("div",{className:"rq-top-panel",children:[(0,i.jsx)("div",{className:"avatar-container",children:(0,i.jsx)(p,{})}),(0,i.jsx)("div",{className:"user-name-container",children:(0,i.jsx)(N,{})}),(0,i.jsx)("div",{className:"widget-container",children:(0,i.jsx)(b,{})}),(0,i.jsx)("div",{className:"widget-container",children:(0,i.jsx)(w,{})}),(0,i.jsx)("div",{className:"widget-container",children:(0,i.jsx)(k,{})})]})}function L(e){var r=e.param,n=e.value;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"rq-param-cell",children:r}),(0,i.jsx)("td",{className:"rq-value-cell",children:n})]})}function I(){var e=f(),r=e.loading,n=e.data,a=e.error;if(r)return(0,i.jsx)("div",{className:"rq-profile",children:"Loading..."});if(a)return(0,i.jsx)("div",{className:"rq-profile",children:(0,i.jsx)("div",{className:"rq-error",children:"Oops! Something went wrong..."})});var t=n.name,s=n.email,l=n.phone,d=n.website,c=n.company;return(0,i.jsx)("div",{className:"rq-profile",children:(0,i.jsx)("table",{children:(0,i.jsxs)("tbody",{children:[(0,i.jsx)(L,{param:"Name",value:t}),(0,i.jsx)(L,{param:"Email",value:s}),(0,i.jsx)(L,{param:"Phone",value:l}),(0,i.jsx)(L,{param:"Website",value:(0,i.jsx)("a",{href:"http://"+d,children:d})}),(0,i.jsx)(L,{param:"Company",value:c.name})]})})})}function P(e){var r=e.number,n=e.data,a=n.title,t=n.completed;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:r}),(0,i.jsx)("td",{children:a}),(0,i.jsx)("td",{children:t&&"\u2705"})]})}function T(){var e=g(),r=e.loading,n=e.data,a=e.invalidate,t=r?[]:n;return(0,i.jsx)("div",{className:"rq-todo-list",children:(0,i.jsxs)("table",{children:[(0,i.jsxs)("thead",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{}),(0,i.jsx)("th",{className:"title",children:"Todos List"}),(0,i.jsx)("th",{children:(0,i.jsx)(C.z,{text:"Refresh",onClick:function(){a()}})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"#"}),(0,i.jsx)("th",{children:"Title"}),(0,i.jsx)("th",{children:"Completed"})]})]}),(0,i.jsx)("tbody",{children:t.map((function(e,r){return(0,i.jsx)(P,{number:r+1,data:e},e.id)}))})]})})}var Z=new a.QueryClient;function R(){return(0,i.jsx)(a.QueryClientProvider,{client:Z,children:(0,i.jsxs)(c,{children:[(0,i.jsx)(Q,{}),(0,i.jsx)(I,{}),(0,i.jsx)(T,{})]})})}}}]);
//# sourceMappingURL=386.491f0eac.chunk.js.map